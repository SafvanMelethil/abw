<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>ال عبد الواحد</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Marcellus:wght@400&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
  


</head>

<body class="index-page">

   <!-- Scrolling message -->
   <div class="scrolling-message">
    <span>أهلاً بكم في الصفحة الرسمية للمستشار صالح ناصر العبد الواحد</span>
</div>



  <header id="header" class="header d-flex align-items-center position-relative">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        
        <div class="logo-container">
          <img src="saleh new.jpeg" alt="Logo">
          <p>المؤسس</p>
          <p><b> المستشار صالح ناصر ال عبدالواحد</b></p>
      </div>

      <div class="middle-text">
        <span>موقع هدية </span>   من المستشار صالح ناصر ال عبدالواحد لقبيلة ال كثير
    </div>

    <div>
      <img class="navlogo" src="Artboard 2 co 2.png" alt="">
    </div>
       
        <!-- <h1 class="sitename">AgriCulture</h1>  -->
      </a>

      
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        
      </nav>
    

  </div>
</header>

<div class="page-title dark-background" data-aos="fade" style="background-image: url(assets/img/page-title-bg.webp);">
  <div class="container position-relative">
    <h1>دعوة
    </h1>
    <nav class="breadcrumbs">
      <ol>
        <li>
       
        </li>
      </ol>
    </nav>
  </div>
</div>



    <style>
       
        .container {
            
            padding: 20px;
            border-radius: 8px;
            position: relative;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .mbtn {
            position: relative;
            left: 50%;
            width: 200px;
            padding: 10px 10px;
            background: #007bff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .form-date{
            position: relative;
    left: 30%;
    width: 40%;
    border-radius: 4px;
    box-sizing: border-box;
        }
        .btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
       
      <form id="marriageForm">
        <div class="form-group">
            <label for="firstName">الاسم الأول</label>
            <input type="text" id="firstName" name="first_name" required>
        </div>
        <div class="form-group">
            <label for="fathersName">اسم الأب</label>
            <input type="text" id="fathersName" name="fathers_name" required>
        </div>
        <div class="form-group">
            <label for="grandfathersName">اسم الجد</label>
            <input type="text" id="grandfathersName" name="grandfathers_name" required>
        </div>
        <div class="form-group">
            <label for="thing">الفخذ</label>
            <input type="text" id="thing" name="thing" required>
        </div>
        <div class="form-group">
          <label for="village">القرية</label>
          <input type="text" id="village" name="village" required>
      </div>
        <div class="form-date">
            <label for="eventDate">تاريخ المناسبة</label>
            <input type="date" id="eventDate" name="event_date" required>
        </div>
        <div class="form-date">
          <label for="todayDate">اليوم </label>
          <input type="date" id="todayDate" name="today_date" required>
      </div>
      <div class="form-group">
        <label for="cityOfOccassion">مدينة المناسبة </label>
        <input type="text" id="cityOfOccassion" name="city_of_occassion" required>
    </div>
    <div class="form-group">
      <label for="hall">اسم القاعة</label>
      <input type="text" id="hall" name="hall" required>
  </div>
  <div class="form-group">
    <label for="herAddress">عنوانها</label>
    <input type="text" id="herAddress" name="her_address" required>
</div>
        <div class="form-group">
            <label for="bridesFathersName"> اسم والد العروسالثلاثة</label>
            <input type="text" id="bridesFathersName" name="brides_fathers_name" required>
        </div>
        <div class="form-group">
          <label for="herVillage">قريته</label>
          <input type="text" id="herVillage" name="her_village" required>
      </div>

        <button type="button" class="mbtn" onclick="saveDetails()">حفظ</button>
    </form>
</body>
</html>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
 function saveDetails() {
    const form = $('#marriageForm'); // Use jQuery to select the form
    const formData = new FormData(form[0]); // Create FormData from the form

    // Get the CSRF token from the meta tag
    const csrfToken = $('meta[name="csrf-token"]').attr('content');

    $.ajax({
        url: 'http://127.0.0.1:8000/marriage-form', // API endpoint
        type: 'POST', // HTTP method
        data: formData, // Form data to be sent
        processData: false, // Prevent jQuery from automatically transforming the data
        contentType: false, // Prevent jQuery from setting a content type
        headers: {
            'X-CSRF-TOKEN': csrfToken // Include the CSRF token in the request headers
        },
        success: function(response) {
            if (response.message) {
                alert(response.message);
                form[0].reset(); // Clear the form on success
            } else {
                alert('Failed to save data.');
            }
        },
        error: function(xhr, status, error) {
            console.error('Error:', error);
            alert('An error occurred while saving the form data.');
        }
    });
}



</script>
    </div>

    <script>
        // Check if editing
        const editIndex = localStorage.getItem('editIndex');
        const editDetail = JSON.parse(localStorage.getItem('editDetail'));

        if (editDetail) {
            const form = document.getElementById('marriageForm');
            form.firstName.value = editDetail['الاسم الأول'];
            form.fathersName.value = editDetail['اسم الأب'];
            form.grandfathersName.value = editDetail['اسم الجد'];
            form.thing.value = editDetail['الشيء'];
            form.village.value = editDetail['القرية'];
            form.eventDate.value = editDetail['تاريخ المناسبة'];
            form.todayDate.value = editDetail['اليوم'];
            form.cityOfOccassion.value = editDetail['مدينة المناسبة'];
            form.hall.value = editDetail['اسم القاعة'];
            form.herAddress.value = editDetail['عنوانها'];
            form.bridesFathersName.value = editDetail[' اسم والد العروسالثلاثة'];
            form.herVillage.value = editDetail['قريته'];
            
        }

        function saveDetails() {
    const form = document.getElementById('marriageForm');
    const details = {
        'الاسم الأول': form.firstName.value,
        'اسم الأب': form.fathersName.value,
        'اسم الجد': form.grandfathersName.value,
        'الفخذ': form.thing.value,
        'القرية': form.village.value,
        'تاريخ المناسبة': form.eventDate.value,
        'اليوم': form.todayDate.value,
        'مدينة المناسبة ': form.cityOfOccassion.value,
        'اسم القاعة': form.hall.value,
        'عنوانها': form.herAddress.value,
        'اسم والد العروسالثلاثة': form.bridesFathersName.value,
        'قريته': form.herVillage.value,
        
    };

    let marriageDetails = JSON.parse(localStorage.getItem('marriageDetails')) || [];
    
    if (editIndex !== null) {
        // Update existing detail
        marriageDetails[editIndex] = details; 
        localStorage.removeItem('editIndex'); 
        localStorage.removeItem('editDetail');
    } else {
        // Add new detail at the beginning of the array
        marriageDetails.unshift(details);
    }

    localStorage.setItem('marriageDetails', JSON.stringify(marriageDetails));
    window.location.href = 'index1.html'; // Redirect to details page
}

    </script>

<footer id="footer" class="footer dark-background">

  <div class="footer-top">
    <div class="container">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
           
          </a>
          <div class="footer-contact pt-3">
            <p>الحمراء، شارع فلسطين</p>
            <p>مركز الجمجوم التجاري، جدة، المملكة العربية السعودية</p>
            <p class="mt-3"><strong>هاتف:</strong> <span>0533484447</span></p>
            <p><strong>بريد إلكتروني
              :</strong> <span>manager@amertm.com.sa</span></p>
          </div>
        </div>

        
       

       

  <div class="copyright text-center">
    <div class="container d-flex flex-column flex-lg-row justify-content-center justify-content-lg-between align-items-center">

      <div class="d-flex flex-column align-items-center align-items-lg-start">
        <div>
          © Copyright <strong><span>Alabdulwahid</span></strong>. All Rights Reserved
        </div>
        <div class="credits">
         <h6 class="me">designed by <a href="https://bit.ly/SafvanMelethil">Safvan Melethil</a> </h6>
          
        </div>
      </div>

      <div class="social-links">
        <a href="https://www.tiktok.com/@salehalshmran"><i class="bi bi-tiktok"></i></a>
        <a href="https://snapchat.com/t/36bXMHNq"><i class="bi bi-snapchat"></i></a>
        <a href="https://www.instagram.com/saleh__alshamrani/?igshid=YmMyMTA2M2Y%3D"><i class="bi bi-instagram"></i></a>
        <a href="https://youtube.com/@salehalshmran?si=APELls9UpVI5JVZN"><i class="bi bi-youtube"></i></a>
        <a href="https://www.facebook.com/share/SiDyjJk5yXrunQSE/?mibextid=LQQJ4d"><i class="bi bi-facebook"></i></a>
        <a href="https://x.com/salehalshamran?s=21&t=zKh8Eo_Gna8THIpjyLYu0Q"><i class="bi bi-twitter-x"></i></a>
      </div>

    </div>
  </div>

</footer>

<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

<!-- Preloader -->
<div id="preloader"></div>

<!-- Vendor JS Files -->
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>
<script src="assets/vendor/aos/aos.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

<!-- Main JS File -->
<script src="assets/js/main.js"></script>

</body>

</html>